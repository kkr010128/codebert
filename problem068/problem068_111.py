#   ????????? str ?????????????????????????????????????????????????????????????????°??????

#   ?????\????±??????????str????¨??????\???????????????
str = list(input())
str = "".join(str)
#   ?????\???????????°p????¨??????\???????????????
p = int(input())
#   p??????????????????????????????????????????
orderList = [0 for i in range(p)]
for i in range(0, p):
    orderList[i] = list(input())
    orderList[i] = "".join(orderList[i]).split()
    if orderList[i][0] == "print":
        print("{0}".format(str[int(orderList[i][1]):int(orderList[i][2]) + 1]))
    elif orderList[i][0] == "reverse":
        str = str[0:int(orderList[i][1])] + str[-len(str) + int(orderList[i][2]):-len(str) + int(orderList[i][1]) - 1:-1] + str[int(orderList[i][2]) + 1:]
    elif orderList[i][0] == "replace":
        str = str[:int(orderList[i][1])] + orderList[i][3] + str[int(orderList[i][2]) + 1:]