'''
ITP-1_9-D
 ???????????????
????????? strstr ?????????????????????????????????????????????????????????????????°???????????????????????????????????????????????\?????????????????????????????§??????
print a b: strstr ??? a ??????????????? b ??????????????§??????????????????
reverse a b: strstr ??? a ??????????????? b ??????????????§?????????????????????
replace a b p: strstr ??? a ??????????????? b ??????????????§??? p ?????????????????????
????????§??????????????? strstr ????????????????????? 0 ???????????¨????????????
???Input
1 ?????????????????? strstr ????????????????????????strstr ?????±?°????????????????????????????2 ????????????????????° qq ????????????????????????
?¶???? qq ??????????????????????¨??????¢?????§?????????????????????
???Output
??? print ???????????¨???????????????????????????????????????????????????
'''
# inputData
string = input()
exeCnt = int(input())

for cnt0 in range(exeCnt):
    exeData = input().split()
    exe00 = exeData[0]
    exe01 = int(exeData[1])
    exe02 = int(exeData[2])
#    exe03 = exeData[3]

    if exe00 == 'print':
        print(string[exe01:exe02 + 1])

    elif exe00 == 'reverse':
        string = string[0:exe01] + string[exe01:exe02 + 1][::-1] + string[exe02 + 1:]

    elif exe00 == 'replace':
        exe03 = exeData[3]
        string = string[0:exe01] + exe03 + string[exe02 + 1:]